{% extends "posts/base.html" %}
{% load static %}
{% block content %}

  <div class="container  mt-5">
    {% csrf_token %}
    <div class="row">
      <div class="container col-4 mt-10 detail-img-div">
        <img id="frame"
             src="{{ post.picture.url }}"
             class="detail-img"
             alt="images of item"
        />
        <!-- button onclick="clearImage()" class="btn btn-primary mt-3">Delete image</button-->

      </div>
      <div class="col-1">
      </div>
      <div class="container col-7 ">
        <div class="col-12">
          <h2 class="poppins" style="font-weight: bolder; font-size: 36px">{{ post.name }}</h2>
        </div>
        {% if post.option == 'exchange' %}
          <div class="row justify-content-between col-12 mt-5">
            <div class="col-6">
              <h2 class="poppins" style="font-weight: bolder; color: #faad14; font-size: 30px">Exchange</h2>
            </div>
            <div class="col-5">
            </div>
          </div>
        {% else %}
          <div class="row justify-content-between col-12 mt-5">
            <div class="col-6">
              <h2 class="poppins nyu-purple" style="font-weight: bold; font-size: 30px">$&nbsp{{ post.price }}</h2>
            </div>
            <div class="col-5">
              {% if post.option == 'sell' %}
                <h2 class="poppins" style="font-weight: bolder; color: #faad14; font-size: 30px">Sell</h2>
              {% elif post.option == 'rent' %}
                <h2 class="poppins" style="font-weight: bolder; color: #faad14; font-size: 30px">Rent</h2>
              {% endif %}
            </div>
          </div>
        {% endif %}
        <div class="col-12 mt-5">
          <img
              src={{ post.user.profile.profile_pic.url }}
              class="rounded-circle"
              weight="40"
              height="40"
              alt="Black and White Portrait of a Man"
              loading="lazy"
          />
          <label class="poppins" style="font-weight: bold; font-size: 18px">Post by {{ post.user.username }}</label>

        </div>

        <div class="col-12 mt-5">

          <label class="poppins" style="font-weight: bold; font-size: 18px">Location:</label>
          <label class="poppins" style="font-size: 18px">&nbsp&nbsp{{ post.location }}</label>

        </div>

        <div class="row col-12 mt-3">
          <div class="col-12">
            <label class="poppins" style="font-weight: bold; font-size: 18px">Description:</label>
          </div>

          <div class="col-8">
            <div class="mt-3" style="border: 1px solid #ccc; border-radius: 16px">
              <p style="margin: 10px 20px; white-space: normal; word-wrap: break-word; word-break: break-all; font-size: 18px">
                {{ post.description }}
              </p>
            </div>
          </div>
        </div>

        <div class="row justify-content-center col-8 mt-5">
          {% if post.interested_count %}
          <div class="col-2" style="margin-bottom: auto; margin-top: auto">
            <i class="bi bi-star"></i><span>&nbsp {{ post.interested_count}}</span>
          </div>
          {% else %}
          <div class="col-7" style="margin-bottom: auto; margin-top: auto">
            Be the first to reach out! Click Interested!
          </div>
          {% endif %}
          <form method="POST" action="{% url 'posts:detail' post.id %}" method="POST">
            {% csrf_token %}
            {% if user.is_superuser %}
            <div class="col-6">
              <button type="submit" class="btn btn-primary" style="background-color: #da0c0c; color: #FFFFFF" name="delete" onclick="return confirm('Are you sure?');">
                <i class="bi"></i>&nbsp DELETE
              </button>
            </div>
            </br>
            {% elif post.user != user %}
            <div class="col-6">
              <button type="submit" class="btn btn-primary" style="background-color: #57068c; color: #FFFFFF" name="interested">
                <i class="bi bi-star"></i>&nbsp Interested!
              </button>
            </div>
            </br>
              {% if is_reported_by_user%}
              <div class="col-6">
                <button type="submit" class="btn btn-primary" style="background-color: #b20606; color: #FFFFFF" name="cancel_report" onclick="return confirm('Are you sure?');"">
                  <i class="bi bi-flag-fill"></i>&nbsp Cancel Report
                </button>
              </div>
              </br>
              {% else %}
              <div class="col-6">
                <button type="submit" class="btn btn-primary" style="background-color: #b20606; color: #FFFFFF" name="report" onclick="return confirm('Are you sure?');"">
                  <i class="bi bi-flag"></i>&nbsp Report
                </button>
              </div>
              </br>
              {% endif %}
            {% else %}
            <div class="col-6">
              <button type="submit" class="btn btn-primary" style="background-color: #da0c0c; color: #FFFFFF" name="delete" onclick="return confirm('Are you sure?');">
                <i class="bi"></i>&nbsp DELETE
              </button>
            </div>
            </br>
            <div class="col-6">
              <button type="submit" class="btn btn-primary" style="background-color: #a686c0; color: #FFFFFF" name="edit">
                <i class="bi"></i>&nbsp EDIT
              </button>
            </div>
            {% endif %}
          </form>
        </div>

      </div>

      <script>
      </script>
    </div>
{% endblock content %}